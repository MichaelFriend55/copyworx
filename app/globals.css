/**
 * @file globals.css
 * @description Global styles and CSS custom properties for CopyWorx
 * 
 * Design System:
 * - Uses CSS custom properties for theming
 * - Ink/navy primary palette with amber accents
 * - Optimized for readability (writing tool aesthetic)
 */

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Background & Foreground */
    --background: 40 33% 99%;
    --foreground: 222 47% 11%;
    
    /* Card surfaces */
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    
    /* Popover surfaces */
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;
    
    /* Primary - Deep Ink Navy */
    --primary: 222 47% 16%;
    --primary-foreground: 40 33% 99%;
    
    /* Secondary - Warm Gray */
    --secondary: 220 14% 96%;
    --secondary-foreground: 222 47% 16%;
    
    /* Muted elements */
    --muted: 220 14% 96%;
    --muted-foreground: 220 8% 46%;
    
    /* Accent - Warm Yellow */
    --accent: 48 97% 48%;
    --accent-foreground: 222 47% 11%;
    
    /* Destructive actions */
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;
    
    /* Borders & Inputs */
    --border: 220 13% 91%;
    --input: 220 13% 91%;
    --ring: 48 97% 48%;
    
    /* Border Radius */
    --radius: 0.625rem;
  }

  .dark {
    /* Dark mode - Ink aesthetic */
    --background: 222 47% 8%;
    --foreground: 40 33% 98%;
    
    --card: 222 47% 11%;
    --card-foreground: 40 33% 98%;
    
    --popover: 222 47% 11%;
    --popover-foreground: 40 33% 98%;
    
    --primary: 48 97% 48%;
    --primary-foreground: 222 47% 8%;
    
    --secondary: 222 30% 18%;
    --secondary-foreground: 40 33% 98%;
    
    --muted: 222 30% 18%;
    --muted-foreground: 220 14% 60%;
    
    --accent: 48 97% 48%;
    --accent-foreground: 222 47% 8%;
    
    --destructive: 0 62% 50%;
    --destructive-foreground: 0 0% 98%;
    
    --border: 222 30% 22%;
    --input: 222 30% 22%;
    --ring: 48 97% 48%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Enhanced typography for writing tool - Inter font for all headings */
  h1, h2, h3, h4, h5, h6 {
    @apply font-sans tracking-tight;
  }

  /* Selection styling */
  ::selection {
    @apply bg-amber-200 text-ink-900;
  }

  ::-moz-selection {
    @apply bg-amber-200 text-ink-900;
  }

  /* Focus styling */
  :focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }
}

@layer components {
  /* Gradient text utility */
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-ink-900 via-ink-700 to-ink-900;
  }

  .text-gradient-amber {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-amber-500 via-amber-400 to-amber-500;
  }

  /* Glass morphism effect */
  .glass {
    @apply bg-white/70 backdrop-blur-lg border border-white/20;
  }

  .glass-dark {
    @apply bg-ink-900/70 backdrop-blur-lg border border-ink-700/20;
  }

  /* Subtle grid background */
  .bg-grid {
    background-image: 
      linear-gradient(to right, hsl(220 13% 91% / 0.5) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(220 13% 91% / 0.5) 1px, transparent 1px);
    background-size: 24px 24px;
  }

  .bg-grid-dark {
    background-image: 
      linear-gradient(to right, hsl(222 30% 22% / 0.5) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(222 30% 22% / 0.5) 1px, transparent 1px);
    background-size: 24px 24px;
  }

  /* Dot pattern background */
  .bg-dots {
    background-image: radial-gradient(hsl(220 13% 91%) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  /* Animated underline for links */
  .link-underline {
    @apply relative;
  }

  .link-underline::after {
    @apply absolute left-0 bottom-0 w-0 h-0.5 bg-amber-500 transition-all duration-300;
    content: '';
  }

  .link-underline:hover::after {
    @apply w-full;
  }

  /* Card hover effect */
  .card-hover {
    @apply transition-all duration-300 hover:shadow-lg hover:-translate-y-1;
  }

  /* Glow effect for CTAs */
  .glow-amber {
    box-shadow: 0 0 40px -10px hsl(48 97% 48% / 0.5);
  }

  .glow-ink {
    box-shadow: 0 0 40px -10px hsl(222 47% 16% / 0.5);
  }
}

@layer utilities {
  /* Staggered animation delays */
  .animation-delay-100 { animation-delay: 100ms; }
  .animation-delay-200 { animation-delay: 200ms; }
  .animation-delay-300 { animation-delay: 300ms; }
  .animation-delay-400 { animation-delay: 400ms; }
  .animation-delay-500 { animation-delay: 500ms; }
  .animation-delay-600 { animation-delay: 600ms; }
  .animation-delay-700 { animation-delay: 700ms; }
  .animation-delay-800 { animation-delay: 800ms; }

  /* Hide scrollbar */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Custom scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-muted rounded-full;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-muted-foreground/30 rounded-full hover:bg-muted-foreground/50 transition-colors;
  }

  /* Gradient borders */
  .border-gradient {
    border: 1px solid transparent;
    background: 
      linear-gradient(var(--background), var(--background)) padding-box,
      linear-gradient(135deg, hsl(var(--primary)), hsl(var(--accent))) border-box;
  }

  /* Apple aesthetic colors - CopyWorx v2 */
  .bg-apple-gray-bg {
    background-color: #F5F5F7;
  }

  .bg-apple-editor-bg {
    background-color: #2F3542;
  }

  .text-apple-text-dark {
    color: #1D1D1F;
  }

  .border-apple-gray-light {
    border-color: #D2D2D7;
  }

  .border-apple-gray {
    border-color: #86868B;
  }

  .bg-apple-blue {
    background-color: #0071E3;
  }

  .bg-apple-blue-dark {
    background-color: #0062CC;
  }

  .text-apple-blue {
    color: #0071E3;
  }

  .hover\:bg-apple-blue-dark:hover {
    background-color: #0062CC;
  }

  .hover\:bg-apple-gray-bg:hover {
    background-color: #F5F5F7;
  }

  .hover\:border-apple-gray:hover {
    border-color: #86868B;
  }

  .focus\:ring-apple-blue:focus {
    --tw-ring-color: #0071E3;
  }

  /* Editor font family classes - used by TipTap FontFamily extension */
  .font-editor-inter { font-family: var(--font-inter), system-ui, sans-serif; }
  .font-editor-roboto { font-family: var(--font-roboto), system-ui, sans-serif; }
  .font-editor-open-sans { font-family: var(--font-open-sans), system-ui, sans-serif; }
  .font-editor-lato { font-family: var(--font-lato), system-ui, sans-serif; }
  .font-editor-montserrat { font-family: var(--font-montserrat), system-ui, sans-serif; }

  /* Animated gradient for AI generation button */
  .aiworx-gradient-animated {
    background: linear-gradient(90deg, #006EE6, #7A3991, #006EE6);
    background-size: 200% 100%;
    animation: gradient-flow 3s ease-in-out infinite;
  }

  @keyframes gradient-flow {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  /* Brand button - Blue to Purple active state */
  .btn-brand {
    background-color: #006EE6;
    color: white;
    transition: background-color 200ms ease-in-out, transform 200ms ease-in-out;
  }

  .btn-brand:hover:not(:disabled) {
    background-color: #0062CC;
  }

  .btn-brand:active:not(:disabled) {
    background-color: #7A3991;
    transform: scale(0.98);
  }

  .btn-brand:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

/**
 * =============================================================================
 * PRINT STYLES
 * =============================================================================
 * Clean, professional print layout showing ONLY document content.
 * Hides all UI chrome (sidebars, toolbar, controls) and fixes layout issues.
 */
@media print {
  /* -------------------------------------------------------------------------
   * 1. PAGE SETUP
   * ------------------------------------------------------------------------- */
  @page {
    size: letter;
    margin: 1in;
  }

  /* -------------------------------------------------------------------------
   * 2. GLOBAL RESETS
   * ------------------------------------------------------------------------- */
  html {
    height: auto !important;
    overflow: visible !important;
    background: white !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  body {
    height: auto !important;
    overflow: visible !important;
    background: white !important;
    color: black !important;
    font-size: 12pt !important;
    line-height: 1.5 !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* -------------------------------------------------------------------------
   * 3. HIDE ALL UI CHROME
   * ------------------------------------------------------------------------- */
  /* Hide elements marked with data-print-hide attribute */
  [data-print-hide] {
    display: none !important;
    visibility: hidden !important;
  }

  /* Hide sidebars */
  [data-sidebar],
  [data-sidebar="left"],
  [data-sidebar="right"] {
    display: none !important;
    width: 0 !important;
    min-width: 0 !important;
    max-width: 0 !important;
    visibility: hidden !important;
  }

  /* Hide sidebar toggle buttons and their containers */
  aside,
  aside + button,
  button[data-print-hide] {
    display: none !important;
  }

  /* Hide any fixed/sticky positioned elements (usually UI) */
  header[class*="sticky"],
  [class*="fixed"],
  [class*="z-50"] {
    display: none !important;
    position: static !important;
  }

  /* Hide slide-out panels and modals */
  [role="dialog"],
  [data-radix-portal],
  .slide-out-panel {
    display: none !important;
  }

  /* -------------------------------------------------------------------------
   * 4. FIX LAYOUT CONTAINERS
   * Reset flex/grid layouts that break pagination
   * ------------------------------------------------------------------------- */
  [data-print-layout] {
    display: block !important;
    width: 100% !important;
    height: auto !important;
    min-height: auto !important;
    max-height: none !important;
    overflow: visible !important;
    flex-direction: column !important;
  }

  /* Main content area */
  main,
  [data-print-content] {
    display: block !important;
    position: static !important;
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
    min-height: auto !important;
    overflow: visible !important;
    padding: 0 !important;
    margin: 0 !important;
    background: white !important;
    flex: none !important;
  }

  /* -------------------------------------------------------------------------
   * 5. FIX EDITOR ZOOM TRANSFORM (Critical for text orientation)
   * The zoom container uses CSS transform which breaks in print
   * ------------------------------------------------------------------------- */
  .editor-zoom-container {
    transform: none !important;
    transform-origin: initial !important;
    width: 100% !important;
    transition: none !important;
  }

  /* Paper container - remove shadows and constraints */
  [data-print-content] > div {
    width: 100% !important;
    max-width: 100% !important;
    min-height: auto !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    background: white !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* -------------------------------------------------------------------------
   * 6. TIPTAP EDITOR CONTENT STYLING
   * Preserve formatting while optimizing for print
   * ------------------------------------------------------------------------- */
  .tiptap-editor {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif !important;
    font-size: 12pt !important;
    line-height: 1.6 !important;
    color: black !important;
    background: white !important;
    width: 100% !important;
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  .tiptap-editor .ProseMirror {
    outline: none !important;
    min-height: auto !important;
  }

  /* Hide placeholder text in print */
  .tiptap-editor .ProseMirror p.is-editor-empty:first-child::before {
    display: none !important;
  }

  /* -------------------------------------------------------------------------
   * 7. TYPOGRAPHY - Headings
   * ------------------------------------------------------------------------- */
  .tiptap-editor h1 {
    font-size: 24pt !important;
    font-weight: 700 !important;
    margin-top: 24pt !important;
    margin-bottom: 12pt !important;
    line-height: 1.2 !important;
    color: black !important;
    page-break-after: avoid !important;
  }

  .tiptap-editor h1:first-child {
    margin-top: 0 !important;
  }

  .tiptap-editor h2 {
    font-size: 18pt !important;
    font-weight: 600 !important;
    margin-top: 18pt !important;
    margin-bottom: 10pt !important;
    line-height: 1.3 !important;
    color: black !important;
    page-break-after: avoid !important;
  }

  .tiptap-editor h2:first-child {
    margin-top: 0 !important;
  }

  .tiptap-editor h3 {
    font-size: 14pt !important;
    font-weight: 600 !important;
    margin-top: 14pt !important;
    margin-bottom: 8pt !important;
    line-height: 1.4 !important;
    color: black !important;
    page-break-after: avoid !important;
  }

  .tiptap-editor h3:first-child {
    margin-top: 0 !important;
  }

  /* -------------------------------------------------------------------------
   * 8. TYPOGRAPHY - Paragraphs and Text
   * ------------------------------------------------------------------------- */
  .tiptap-editor p {
    margin-top: 0 !important;
    margin-bottom: 10pt !important;
    orphans: 3 !important;
    widows: 3 !important;
  }

  .tiptap-editor p:last-child {
    margin-bottom: 0 !important;
  }

  /* Text formatting */
  .tiptap-editor strong {
    font-weight: 600 !important;
  }

  .tiptap-editor em {
    font-style: italic !important;
  }

  .tiptap-editor u {
    text-decoration: underline !important;
  }

  /* -------------------------------------------------------------------------
   * 9. LISTS
   * ------------------------------------------------------------------------- */
  .tiptap-editor ul,
  .tiptap-editor ol {
    padding-left: 24pt !important;
    margin: 10pt 0 !important;
  }

  .tiptap-editor ul {
    list-style-type: disc !important;
  }

  .tiptap-editor ol {
    list-style-type: decimal !important;
  }

  .tiptap-editor li {
    margin-bottom: 4pt !important;
    page-break-inside: avoid !important;
  }

  /* -------------------------------------------------------------------------
   * 10. LINKS
   * Print as underlined text with consistent styling
   * ------------------------------------------------------------------------- */
  .tiptap-editor a {
    color: black !important;
    text-decoration: underline !important;
  }

  /* Optional: Show URL after link text */
  /* Uncomment if you want URLs printed:
  .tiptap-editor a::after {
    content: " (" attr(href) ")";
    font-size: 9pt;
    color: #666;
  }
  */

  /* -------------------------------------------------------------------------
   * 11. BLOCKQUOTES
   * ------------------------------------------------------------------------- */
  .tiptap-editor blockquote {
    border-left: 3pt solid #666 !important;
    padding-left: 12pt !important;
    margin-left: 0 !important;
    margin-top: 10pt !important;
    margin-bottom: 10pt !important;
    font-style: italic !important;
    color: #333 !important;
    page-break-inside: avoid !important;
  }

  /* -------------------------------------------------------------------------
   * 12. CODE BLOCKS
   * ------------------------------------------------------------------------- */
  .tiptap-editor code {
    background-color: #f5f5f5 !important;
    padding: 2pt 4pt !important;
    border-radius: 2pt !important;
    font-family: 'Courier New', monospace !important;
    font-size: 10pt !important;
  }

  .tiptap-editor pre {
    background-color: #f5f5f5 !important;
    padding: 12pt !important;
    border-radius: 4pt !important;
    overflow: visible !important;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
    page-break-inside: avoid !important;
  }

  /* -------------------------------------------------------------------------
   * 13. IMAGES (if present in editor)
   * ------------------------------------------------------------------------- */
  .tiptap-editor img {
    max-width: 100% !important;
    height: auto !important;
    page-break-inside: avoid !important;
  }

  /* -------------------------------------------------------------------------
   * 14. PAGE BREAK CONTROLS
   * ------------------------------------------------------------------------- */
  /* Avoid breaking inside these elements */
  .tiptap-editor h1,
  .tiptap-editor h2,
  .tiptap-editor h3,
  .tiptap-editor blockquote,
  .tiptap-editor pre,
  .tiptap-editor li {
    page-break-inside: avoid !important;
  }

  /* Avoid page break after headings */
  .tiptap-editor h1,
  .tiptap-editor h2,
  .tiptap-editor h3 {
    page-break-after: avoid !important;
  }

  /* -------------------------------------------------------------------------
   * 15. TEXT ALIGNMENT (preserve from editor)
   * ------------------------------------------------------------------------- */
  .tiptap-editor [data-text-align="left"] {
    text-align: left !important;
  }

  .tiptap-editor [data-text-align="center"] {
    text-align: center !important;
  }

  .tiptap-editor [data-text-align="right"] {
    text-align: right !important;
  }

  .tiptap-editor [data-text-align="justify"] {
    text-align: justify !important;
  }

  /* -------------------------------------------------------------------------
   * 16. HIGHLIGHT COLORS (print with colors)
   * ------------------------------------------------------------------------- */
  .tiptap-editor mark {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* -------------------------------------------------------------------------
   * 17. ADDITIONAL CLEANUP
   * ------------------------------------------------------------------------- */
  /* Remove any remaining shadows */
  * {
    box-shadow: none !important;
    text-shadow: none !important;
  }

  /* Ensure no horizontal scrolling/overflow */
  * {
    max-width: 100% !important;
    overflow-x: visible !important;
  }

  /* Remove transitions/animations for cleaner print */
  *,
  *::before,
  *::after {
    transition: none !important;
    animation: none !important;
  }
}

